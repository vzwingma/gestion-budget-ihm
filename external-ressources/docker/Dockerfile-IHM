# Issu de la dernière image Nginx
FROM nginx:stable-alpine
MAINTAINER vincent.zwingmann@gmail.com

COPY build/ /usr/share/nginx/html
RUN rm /etc/nginx/conf.d/default.conf
COPY nginx.conf /etc/nginx/conf.d

# Déclaration des variables d'environnement
ARG REACT_APP_BUDGET_VERSION
ENV REACT_APP_BUDGET_VERSION=$REACT_APP_BUDGET_VERSION

ARG REACT_APP_CONFIG_URL_COMPTES
ENV REACT_APP_CONFIG_URL_COMPTES=$REACT_APP_CONFIG_URL_COMPTES
ARG REACT_APP_CONFIG_URL_OPERATIONS
ENV REACT_APP_CONFIG_URL_OPERATIONS=$REACT_APP_CONFIG_URL_OPERATIONS
ARG REACT_APP_CONFIG_URL_PARAMS
ENV REACT_APP_CONFIG_URL_PARAMS=$REACT_APP_CONFIG_URL_PARAMS
ARG REACT_APP_CONFIG_URL_UTILISATEURS
ENV REACT_APP_CONFIG_URL_UTILISATEURS=$REACT_APP_CONFIG_URL_UTILISATEURS

EXPOSE 3000
CMD ["nginx", "-g", "daemon off;"]